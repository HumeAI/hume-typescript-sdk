/**
 * This file was auto-generated by Fern from our API Definition.
 */

import { mockServerPool } from "../../mock-server/MockServerPool";
import { HumeClient } from "../../../src/Client";
import * as Hume from "../../../src/api/index";

describe("Prompts", () => {
    test("list-prompts (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new HumeClient({
            apiKey: "test",
            environment: { base: server.baseUrl, evi: server.baseUrl, tts: server.baseUrl, stream: server.baseUrl },
        });

        const rawResponseBody = {
            page_number: 0,
            page_size: 2,
            total_pages: 1,
            prompts_page: [
                {
                    id: "af699d45-2985-42cc-91b9-af9e5da3bac5",
                    version: 0,
                    version_type: "FIXED",
                    version_description: "",
                    name: "Weather Assistant Prompt",
                    created_on: 1715267200693,
                    modified_on: 1715267200693,
                    text: "<role>You are an AI weather assistant providing users with accurate and up-to-date weather information. Respond to user queries concisely and clearly. Use simple language and avoid technical jargon. Provide temperature, precipitation, wind conditions, and any weather alerts. Include helpful tips if severe weather is expected.</role>",
                },
                {
                    id: "616b2b4c-a096-4445-9c23-64058b564fc2",
                    version: 0,
                    version_type: "FIXED",
                    version_description: "",
                    name: "Web Search Assistant Prompt",
                    created_on: 1715267200693,
                    modified_on: 1715267200693,
                    text: "<role>You are an AI web search assistant designed to help users find accurate and relevant information on the web. Respond to user queries promptly, using the built-in web search tool to retrieve up-to-date results. Present information clearly and concisely, summarizing key points where necessary. Use simple language and avoid technical jargon. If needed, provide helpful tips for refining search queries to obtain better results.</role>",
                },
            ],
        };
        server.mockEndpoint().get("/v0/evi/prompts").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const expected = {
            pageNumber: 0,
            pageSize: 2,
            totalPages: 1,
            promptsPage: [
                {
                    id: "af699d45-2985-42cc-91b9-af9e5da3bac5",
                    version: 0,
                    versionType: "FIXED",
                    versionDescription: "",
                    name: "Weather Assistant Prompt",
                    createdOn: 1715267200693,
                    modifiedOn: 1715267200693,
                    text: "<role>You are an AI weather assistant providing users with accurate and up-to-date weather information. Respond to user queries concisely and clearly. Use simple language and avoid technical jargon. Provide temperature, precipitation, wind conditions, and any weather alerts. Include helpful tips if severe weather is expected.</role>",
                },
                {
                    id: "616b2b4c-a096-4445-9c23-64058b564fc2",
                    version: 0,
                    versionType: "FIXED",
                    versionDescription: "",
                    name: "Web Search Assistant Prompt",
                    createdOn: 1715267200693,
                    modifiedOn: 1715267200693,
                    text: "<role>You are an AI web search assistant designed to help users find accurate and relevant information on the web. Respond to user queries promptly, using the built-in web search tool to retrieve up-to-date results. Present information clearly and concisely, summarizing key points where necessary. Use simple language and avoid technical jargon. If needed, provide helpful tips for refining search queries to obtain better results.</role>",
                },
            ],
        };
        const page = await client.empathicVoice.prompts.listPrompts({
            pageNumber: 0,
            pageSize: 2,
        });
        expect(expected.promptsPage).toEqual(page.data);

        expect(page.hasNextPage()).toBe(true);
        const nextPage = await page.getNextPage();
        expect(expected.promptsPage).toEqual(nextPage.data);
    });

    test("list-prompts (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new HumeClient({
            apiKey: "test",
            environment: { base: server.baseUrl, evi: server.baseUrl, tts: server.baseUrl, stream: server.baseUrl },
        });

        const rawResponseBody = { error: undefined, message: undefined, code: undefined };
        server.mockEndpoint().get("/v0/evi/prompts").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.empathicVoice.prompts.listPrompts();
        }).rejects.toThrow(
            new Hume.empathicVoice.BadRequestError({
                error: undefined,
                message: undefined,
                code: undefined,
            }),
        );
    });

    test("create-prompt (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new HumeClient({
            apiKey: "test",
            environment: { base: server.baseUrl, evi: server.baseUrl, tts: server.baseUrl, stream: server.baseUrl },
        });
        const rawRequestBody = {
            name: "Weather Assistant Prompt",
            text: "<role>You are an AI weather assistant providing users with accurate and up-to-date weather information. Respond to user queries concisely and clearly. Use simple language and avoid technical jargon. Provide temperature, precipitation, wind conditions, and any weather alerts. Include helpful tips if severe weather is expected.</role>",
        };
        const rawResponseBody = {
            id: "af699d45-2985-42cc-91b9-af9e5da3bac5",
            version: 0,
            version_type: "FIXED",
            version_description: undefined,
            name: "Weather Assistant Prompt",
            created_on: 1722633247488,
            modified_on: 1722633247488,
            text: "<role>You are an AI weather assistant providing users with accurate and up-to-date weather information. Respond to user queries concisely and clearly. Use simple language and avoid technical jargon. Provide temperature, precipitation, wind conditions, and any weather alerts. Include helpful tips if severe weather is expected.</role>",
        };
        server
            .mockEndpoint()
            .post("/v0/evi/prompts")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.empathicVoice.prompts.createPrompt({
            name: "Weather Assistant Prompt",
            text: "<role>You are an AI weather assistant providing users with accurate and up-to-date weather information. Respond to user queries concisely and clearly. Use simple language and avoid technical jargon. Provide temperature, precipitation, wind conditions, and any weather alerts. Include helpful tips if severe weather is expected.</role>",
        });
        expect(response).toEqual({
            id: "af699d45-2985-42cc-91b9-af9e5da3bac5",
            version: 0,
            versionType: "FIXED",
            versionDescription: undefined,
            name: "Weather Assistant Prompt",
            createdOn: 1722633247488,
            modifiedOn: 1722633247488,
            text: "<role>You are an AI weather assistant providing users with accurate and up-to-date weather information. Respond to user queries concisely and clearly. Use simple language and avoid technical jargon. Provide temperature, precipitation, wind conditions, and any weather alerts. Include helpful tips if severe weather is expected.</role>",
        });
    });

    test("create-prompt (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new HumeClient({
            apiKey: "test",
            environment: { base: server.baseUrl, evi: server.baseUrl, tts: server.baseUrl, stream: server.baseUrl },
        });
        const rawRequestBody = { name: "name", version_description: undefined, text: "text" };
        const rawResponseBody = { error: undefined, message: undefined, code: undefined };
        server
            .mockEndpoint()
            .post("/v0/evi/prompts")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.empathicVoice.prompts.createPrompt({
                name: "name",
                versionDescription: undefined,
                text: "text",
            });
        }).rejects.toThrow(
            new Hume.empathicVoice.BadRequestError({
                error: undefined,
                message: undefined,
                code: undefined,
            }),
        );
    });

    test("list-prompt-versions (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new HumeClient({
            apiKey: "test",
            environment: { base: server.baseUrl, evi: server.baseUrl, tts: server.baseUrl, stream: server.baseUrl },
        });

        const rawResponseBody = {
            page_number: 0,
            page_size: 10,
            total_pages: 1,
            prompts_page: [
                {
                    id: "af699d45-2985-42cc-91b9-af9e5da3bac5",
                    version: 0,
                    version_type: "FIXED",
                    version_description: "",
                    name: "Weather Assistant Prompt",
                    created_on: 1722633247488,
                    modified_on: 1722633247488,
                    text: "<role>You are an AI weather assistant providing users with accurate and up-to-date weather information. Respond to user queries concisely and clearly. Use simple language and avoid technical jargon. Provide temperature, precipitation, wind conditions, and any weather alerts. Include helpful tips if severe weather is expected.</role>",
                },
            ],
        };
        server
            .mockEndpoint()
            .get("/v0/evi/prompts/af699d45-2985-42cc-91b9-af9e5da3bac5")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.empathicVoice.prompts.listPromptVersions("af699d45-2985-42cc-91b9-af9e5da3bac5");
        expect(response).toEqual({
            pageNumber: 0,
            pageSize: 10,
            totalPages: 1,
            promptsPage: [
                {
                    id: "af699d45-2985-42cc-91b9-af9e5da3bac5",
                    version: 0,
                    versionType: "FIXED",
                    versionDescription: "",
                    name: "Weather Assistant Prompt",
                    createdOn: 1722633247488,
                    modifiedOn: 1722633247488,
                    text: "<role>You are an AI weather assistant providing users with accurate and up-to-date weather information. Respond to user queries concisely and clearly. Use simple language and avoid technical jargon. Provide temperature, precipitation, wind conditions, and any weather alerts. Include helpful tips if severe weather is expected.</role>",
                },
            ],
        });
    });

    test("list-prompt-versions (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new HumeClient({
            apiKey: "test",
            environment: { base: server.baseUrl, evi: server.baseUrl, tts: server.baseUrl, stream: server.baseUrl },
        });

        const rawResponseBody = { error: undefined, message: undefined, code: undefined };
        server.mockEndpoint().get("/v0/evi/prompts/id").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.empathicVoice.prompts.listPromptVersions("id");
        }).rejects.toThrow(
            new Hume.empathicVoice.BadRequestError({
                error: undefined,
                message: undefined,
                code: undefined,
            }),
        );
    });

    test("create-prompt-version (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new HumeClient({
            apiKey: "test",
            environment: { base: server.baseUrl, evi: server.baseUrl, tts: server.baseUrl, stream: server.baseUrl },
        });
        const rawRequestBody = {
            text: "<role>You are an updated version of an AI weather assistant providing users with accurate and up-to-date weather information. Respond to user queries concisely and clearly. Use simple language and avoid technical jargon. Provide temperature, precipitation, wind conditions, and any weather alerts. Include helpful tips if severe weather is expected.</role>",
            version_description: "This is an updated version of the Weather Assistant Prompt.",
        };
        const rawResponseBody = {
            id: "af699d45-2985-42cc-91b9-af9e5da3bac5",
            version: 1,
            version_type: "FIXED",
            version_description: "This is an updated version of the Weather Assistant Prompt.",
            name: "Weather Assistant Prompt",
            created_on: 1722633247488,
            modified_on: 1722635140150,
            text: "<role>You are an updated version of an AI weather assistant providing users with accurate and up-to-date weather information. Respond to user queries concisely and clearly. Use simple language and avoid technical jargon. Provide temperature, precipitation, wind conditions, and any weather alerts. Include helpful tips if severe weather is expected.</role>",
        };
        server
            .mockEndpoint()
            .post("/v0/evi/prompts/af699d45-2985-42cc-91b9-af9e5da3bac5")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.empathicVoice.prompts.createPromptVersion(
            "af699d45-2985-42cc-91b9-af9e5da3bac5",
            {
                text: "<role>You are an updated version of an AI weather assistant providing users with accurate and up-to-date weather information. Respond to user queries concisely and clearly. Use simple language and avoid technical jargon. Provide temperature, precipitation, wind conditions, and any weather alerts. Include helpful tips if severe weather is expected.</role>",
                versionDescription: "This is an updated version of the Weather Assistant Prompt.",
            },
        );
        expect(response).toEqual({
            id: "af699d45-2985-42cc-91b9-af9e5da3bac5",
            version: 1,
            versionType: "FIXED",
            versionDescription: "This is an updated version of the Weather Assistant Prompt.",
            name: "Weather Assistant Prompt",
            createdOn: 1722633247488,
            modifiedOn: 1722635140150,
            text: "<role>You are an updated version of an AI weather assistant providing users with accurate and up-to-date weather information. Respond to user queries concisely and clearly. Use simple language and avoid technical jargon. Provide temperature, precipitation, wind conditions, and any weather alerts. Include helpful tips if severe weather is expected.</role>",
        });
    });

    test("create-prompt-version (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new HumeClient({
            apiKey: "test",
            environment: { base: server.baseUrl, evi: server.baseUrl, tts: server.baseUrl, stream: server.baseUrl },
        });
        const rawRequestBody = { version_description: undefined, text: "text" };
        const rawResponseBody = { error: undefined, message: undefined, code: undefined };
        server
            .mockEndpoint()
            .post("/v0/evi/prompts/id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.empathicVoice.prompts.createPromptVersion("id", {
                versionDescription: undefined,
                text: "text",
            });
        }).rejects.toThrow(
            new Hume.empathicVoice.BadRequestError({
                error: undefined,
                message: undefined,
                code: undefined,
            }),
        );
    });

    test("delete-prompt (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new HumeClient({
            apiKey: "test",
            environment: { base: server.baseUrl, evi: server.baseUrl, tts: server.baseUrl, stream: server.baseUrl },
        });

        server
            .mockEndpoint()
            .delete("/v0/evi/prompts/af699d45-2985-42cc-91b9-af9e5da3bac5")
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.empathicVoice.prompts.deletePrompt("af699d45-2985-42cc-91b9-af9e5da3bac5");
        expect(response).toEqual(undefined);
    });

    test("delete-prompt (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new HumeClient({
            apiKey: "test",
            environment: { base: server.baseUrl, evi: server.baseUrl, tts: server.baseUrl, stream: server.baseUrl },
        });

        const rawResponseBody = { error: undefined, message: undefined, code: undefined };
        server
            .mockEndpoint()
            .delete("/v0/evi/prompts/id")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.empathicVoice.prompts.deletePrompt("id");
        }).rejects.toThrow(
            new Hume.empathicVoice.BadRequestError({
                error: undefined,
                message: undefined,
                code: undefined,
            }),
        );
    });

    test("get-prompt-version (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new HumeClient({
            apiKey: "test",
            environment: { base: server.baseUrl, evi: server.baseUrl, tts: server.baseUrl, stream: server.baseUrl },
        });

        const rawResponseBody = {
            id: "af699d45-2985-42cc-91b9-af9e5da3bac5",
            version: 0,
            version_type: "FIXED",
            version_description: "",
            name: "Weather Assistant Prompt",
            created_on: 1722633247488,
            modified_on: 1722633247488,
            text: "<role>You are an AI weather assistant providing users with accurate and up-to-date weather information. Respond to user queries concisely and clearly. Use simple language and avoid technical jargon. Provide temperature, precipitation, wind conditions, and any weather alerts. Include helpful tips if severe weather is expected.</role>",
        };
        server
            .mockEndpoint()
            .get("/v0/evi/prompts/af699d45-2985-42cc-91b9-af9e5da3bac5/version/0")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.empathicVoice.prompts.getPromptVersion("af699d45-2985-42cc-91b9-af9e5da3bac5", 0);
        expect(response).toEqual({
            id: "af699d45-2985-42cc-91b9-af9e5da3bac5",
            version: 0,
            versionType: "FIXED",
            versionDescription: "",
            name: "Weather Assistant Prompt",
            createdOn: 1722633247488,
            modifiedOn: 1722633247488,
            text: "<role>You are an AI weather assistant providing users with accurate and up-to-date weather information. Respond to user queries concisely and clearly. Use simple language and avoid technical jargon. Provide temperature, precipitation, wind conditions, and any weather alerts. Include helpful tips if severe weather is expected.</role>",
        });
    });

    test("get-prompt-version (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new HumeClient({
            apiKey: "test",
            environment: { base: server.baseUrl, evi: server.baseUrl, tts: server.baseUrl, stream: server.baseUrl },
        });

        const rawResponseBody = { error: undefined, message: undefined, code: undefined };
        server
            .mockEndpoint()
            .get("/v0/evi/prompts/id/version/1")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.empathicVoice.prompts.getPromptVersion("id", 1);
        }).rejects.toThrow(
            new Hume.empathicVoice.BadRequestError({
                error: undefined,
                message: undefined,
                code: undefined,
            }),
        );
    });

    test("delete-prompt-version (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new HumeClient({
            apiKey: "test",
            environment: { base: server.baseUrl, evi: server.baseUrl, tts: server.baseUrl, stream: server.baseUrl },
        });

        server
            .mockEndpoint()
            .delete("/v0/evi/prompts/af699d45-2985-42cc-91b9-af9e5da3bac5/version/1")
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.empathicVoice.prompts.deletePromptVersion(
            "af699d45-2985-42cc-91b9-af9e5da3bac5",
            1,
        );
        expect(response).toEqual(undefined);
    });

    test("delete-prompt-version (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new HumeClient({
            apiKey: "test",
            environment: { base: server.baseUrl, evi: server.baseUrl, tts: server.baseUrl, stream: server.baseUrl },
        });

        const rawResponseBody = { error: undefined, message: undefined, code: undefined };
        server
            .mockEndpoint()
            .delete("/v0/evi/prompts/id/version/1")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.empathicVoice.prompts.deletePromptVersion("id", 1);
        }).rejects.toThrow(
            new Hume.empathicVoice.BadRequestError({
                error: undefined,
                message: undefined,
                code: undefined,
            }),
        );
    });

    test("update-prompt-description (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new HumeClient({
            apiKey: "test",
            environment: { base: server.baseUrl, evi: server.baseUrl, tts: server.baseUrl, stream: server.baseUrl },
        });
        const rawRequestBody = { version_description: "This is an updated version_description." };
        const rawResponseBody = {
            id: "af699d45-2985-42cc-91b9-af9e5da3bac5",
            version: 1,
            version_type: "FIXED",
            version_description: "This is an updated version_description.",
            name: "string",
            created_on: 1722633247488,
            modified_on: 1722634770585,
            text: "<role>You are an AI weather assistant providing users with accurate and up-to-date weather information. Respond to user queries concisely and clearly. Use simple language and avoid technical jargon. Provide temperature, precipitation, wind conditions, and any weather alerts. Include helpful tips if severe weather is expected.</role>",
        };
        server
            .mockEndpoint()
            .patch("/v0/evi/prompts/af699d45-2985-42cc-91b9-af9e5da3bac5/version/1")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.empathicVoice.prompts.updatePromptDescription(
            "af699d45-2985-42cc-91b9-af9e5da3bac5",
            1,
            {
                versionDescription: "This is an updated version_description.",
            },
        );
        expect(response).toEqual({
            id: "af699d45-2985-42cc-91b9-af9e5da3bac5",
            version: 1,
            versionType: "FIXED",
            versionDescription: "This is an updated version_description.",
            name: "string",
            createdOn: 1722633247488,
            modifiedOn: 1722634770585,
            text: "<role>You are an AI weather assistant providing users with accurate and up-to-date weather information. Respond to user queries concisely and clearly. Use simple language and avoid technical jargon. Provide temperature, precipitation, wind conditions, and any weather alerts. Include helpful tips if severe weather is expected.</role>",
        });
    });

    test("update-prompt-description (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new HumeClient({
            apiKey: "test",
            environment: { base: server.baseUrl, evi: server.baseUrl, tts: server.baseUrl, stream: server.baseUrl },
        });
        const rawRequestBody = { version_description: undefined };
        const rawResponseBody = { error: undefined, message: undefined, code: undefined };
        server
            .mockEndpoint()
            .patch("/v0/evi/prompts/id/version/1")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.empathicVoice.prompts.updatePromptDescription("id", 1, {
                versionDescription: undefined,
            });
        }).rejects.toThrow(
            new Hume.empathicVoice.BadRequestError({
                error: undefined,
                message: undefined,
                code: undefined,
            }),
        );
    });
});
